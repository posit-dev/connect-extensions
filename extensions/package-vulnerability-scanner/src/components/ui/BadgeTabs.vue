<template>
  <div>
    <div class="block">
      <div class="border-b border-gray-200">
        <nav class="-mb-px flex" aria-label="Tabs">
          <button
            v-for="tab in tabs"
            :key="tab.name"
            :class="[
              model === tab.name
                ? getActiveTabClasses(tab.color)
                : 'border-transparent text-gray-600 hover:border-gray-300 hover:text-gray-700',
              'flex items-center border-b-2 px-4 py-2 text-sm font-medium whitespace-nowrap cursor-pointer',
            ]"
            :aria-selected="model === tab.name"
            @click="model = tab.name"
          >
            {{ tab.name }}

            <ColorBadge
              v-if="tab.count"
              :type="model === tab.name ? tab.color : 'neutral'"
              class="ml-3"
            >
              {{ tab.count }}
            </ColorBadge>
          </button>
        </nav>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import ColorBadge from "./ColorBadge.vue";

export type Tab = {
  name: string;
  count?: number;
  color: "success" | "error" | "neutral" | "primary";
};

const model = defineModel<string>({ required: true });

defineProps<{
  tabs: Tab[];
}>();

const getActiveTabClasses = (color: Tab["color"]) => {
  switch (color) {
    case "error":
      return "border-red-600 text-red-700";
    case "success":
      return "border-green-700 text-green-600";
    case "neutral":
      return "border-gray-500 text-gray-600";
    case "primary":
      return "border-blue-700 text-blue-700";
  }
};
</script>
